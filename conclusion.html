<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Where's my cat?!?</title>
<link href="images/catlogo.png" rel="icon" >
<link href="styles.css" rel="stylesheet" />
<script src="jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function() { 

$('img#cat').hide().css({transform: 'scaleX(-1)' , left:1000, top:365 });

$('.output').text(localStorage.getItem('demo_storage'));



	function storeSound() {
		localStorage.setItem('soundState',isPlaying);
	}
	var isPlaying = localStorage.getItem('soundState');
		$('#music').get(0).play();//plays audio

	if(isPlaying=='true') {

		$('img#vOn').attr('src','images/volumeon.png');
		$('.bg_music').each(function() {
		$(this).get(0).muted = false;
	})
	}else {
		$('img#vOn').attr('src','images/volumeoff.png');
		$('.bg_music').each(function() {
	$(this).get(0).muted = true;
	})
}
	$('img#vOn').click(function() {
		if(isPlaying) {
			$(this).attr('src','images/volumeoff.png');
			$('.bg_music').each(function() {
		$(this).get(0).muted = true;
	})
		isPlaying = false;
	} else {
		$(this).attr('src','images/volumeon.png');
		$('.bg_music').each(function() {
			$(this).get(0).muted = false;
		})
		isPlaying = true;
	}
})

setTimeout(function(){ jQuery('body').hide().fadeIn()}, 0);

$('div#dialog').click(events_handler);
    var events_counter = 0;
		function events_handler() {
			events_counter++;
        
		

	if (events_counter==1){
		$('div#dialog').html('<p><b>Hunter:</b> You\'re challenging me again.. I thought this was over..</p>');
		$('img#hunter').animate({left:200},{duration:200});
	}
		
	if (events_counter==2){
		$('div#dialog').html('<p><b>Random school student:</b> It\'s not over unless I say it is!!!</p>');
		$('img#character1').animate({left:250},{duration:200});
	}
		
	if (events_counter==3){
		$('img#hunter1').css({left:200});
		$('img#hunter').hide();
		$('#music').get(0).pause();
		$('#punch').get(0).play();
		$('#fightingmusic').prop("volume", 0.3);
        $('#fightingmusic').get(0).play();
	}
		
	if (events_counter==4){
		$('img#character11').css({left:300});
		$('img#character1').hide();
	}
		
	if (events_counter==5){
		$('img#hunter4').css({left:200});
		$('img#hunter1').hide();
		$('#kick').get(0).play();
	}
		
	if (events_counter==6){
		$('img#hunter5').css({left:200});
		$('img#hunter4').hide();
		$('#ow').get(0).play();
		$('img#character12').animate({left:340},{duration:20});
		$('img#character11').hide();
	}
		
	if (events_counter==7){
		$('div#dialog').html('<p><b>Random school student:</b> Damn you Hunter!!!!</p>');
		$('img#character12').animate({left:5000},{duration:1020});
	}
		
	if (events_counter==8){
		$('div#dialog').html('<p>Hunter: *shakes head* -_- </p>');
		$('img#hunter6').animate({left:200},{duration:0});
		$('img#hunter5').hide();
	}
		
	if (events_counter==9){
		$('#fightingmusic').get(0).pause();
		$('#music').get(0).play();
		$('img#hunter6').hide();
	    $('img#hunter').show();
		$('img#cat').width(100).height(100).animate({left:300},{duration:2000});
		$('img#cat').show();
		$('#meow').get(0).play();
		$('div#dialog').html('<p><b>Hunter:</b> There you are Lucy!!</p>');
	}
		
	if (events_counter==10){
		$('div#dialog').html('<p><b>Lucy:</b> Meowwww</p>');
		$('#meow').get(0).play();
	}
		
	if(events_counter==11){
		$('div#dialog').html('<p><b>Hunter:</b> You were waiting for me.</p>');
	
	}
		
	if(events_counter==12){
		$('#meow').get(0).play();
		$('div#dialog').html('<p><b>Hunter:</b> Let\'s go home.</p>');
	}
		
	if(events_counter==13){
		$('img#cat').css({transform: 'scaleX(1)'}).animate({left: 1800},{duration:2000});
		$('img#hunter').animate({left: 1800},{duration:2000});
		 
		setTimeout(function(){
		  window.location="end.html";
		   },2000) 
		  storeSound();  
		}
		
	}

})
</script>
</head>
<body>
<div id="stage1">
	<img src="" id="vOn"/>
	<img src="images/cat.png" id="cat"/>
	<img src="images/MainCharacter.png" id="hunter"/>
	<img src="images/character1.png" id="character1"/>
	<img src="images/maincharacter1.png" id="hunter1"/>
	<img src="images/character11.png" id="character11"/>
	<img src="images/character12.png" id="character12"/>
	<img src="images/maincharacter4.png" id="hunter4"/>
	<img src="images/maincharacter5.png" id="hunter5"/>
	<img src="images/maincharacter6.png" id="hunter6"/>
		<div id="dialog"><p><b>Narrator:</b> It's be a couple of weeks later and it seems like Hunter and his beloved cat are doing well <b class="output"></b>.</p></div>
</div>

<audio src="music/ow.mp3" id="ow" class="bg_music"></audio>
<audio src="music/kick.mp3" id="kick" class="bg_music"></audio>
<audio src="music/punch.mp3" id="punch" class="bg_music"></audio>
<audio loop src="music/music.mp3" id="music" class="bg_music"></audio>
<audio src="music/fightingmusic.mp3" id="fightingmusic" class="bg_music"></audio>
<audio src="music/meow.mp3" id="meow" class="bg_music"></audio>

</body>
</html>